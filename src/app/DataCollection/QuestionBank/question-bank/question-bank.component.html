<body>
  <app-sidebar></app-sidebar>
  <div class="division">
    <span> Todos </span>
    <span> Categoria</span>
    <span style="margin-left: 855px;"> Mostrando 1-9 de 4 resultados</span>
    <hr style="border: 2px solid #A4A6B3;">

    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" matSort>

        <ng-container matColumnDef="displayName">
          <th mat-header-cell *matHeaderCellDef> Nombre </th>
          <td mat-cell *matCellDef="let intent"> {{intent.displayName}} </td>
        </ng-container>

        <ng-container matColumnDef="trainingPhrases">
          <th mat-header-cell *matHeaderCellDef>Frases Entrenadas</th>
          <td mat-cell *matCellDef="let intent">
            <ng-container *ngFor="let trainingPhrase of intent.trainingPhrases">
              {{trainingPhrase.text}}<br>

            </ng-container>

          </td>
        </ng-container>

        <ng-container matColumnDef="responses">
          <th mat-header-cell *matHeaderCellDef>Respuestas Bot</th>
          <td mat-cell *matCellDef="let intent">
            <ng-container *ngFor="let response of intent.responses">
              {{response.messageText}}<br>
            </ng-container>
          </td>
        </ng-container>

        <ng-container matColumnDef="createdAt">
          <th mat-header-cell *matHeaderCellDef> Creado </th>
          <td mat-cell *matCellDef="let intent"> {{intent.createdAt| date:'medium'}} </td>
        </ng-container>

        <ng-container matColumnDef="trainingPhrase">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let intent">
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="addTrainingPhrase(intent)">Agregar Frase</button>
              <button mat-menu-item (click)="editTrainingPhrase(intent, trainingPhrase)" *ngFor="let trainingPhrase of intent.trainingPhrases">Modificar Frase</button>
              <button mat-menu-item (click)="deleteTrainingPhrase(intent, trainingPhrase)" *ngFor="let trainingPhrase of intent.trainingPhrases">Eliminar Frase</button>
            </mat-menu>
            <button mat-icon-button [matMenuTriggerFor]="menu">
              <mat-icon>textsms</mat-icon>
            </button>
          </td>
        </ng-container>


        <ng-container matColumnDef="addResponse">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let intent">
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="addResponse(intent)">Agregar Respuesta</button>
              <button mat-menu-item (click)="editResponse(intent, response)" *ngFor="let response of intent.responses">Modificar Respuesta</button>
              <button mat-menu-item (click)="deleteResponse(intent, response)" *ngFor="let response of intent.responses">Eliminar Respuesta</button>
            </mat-menu>
            <button mat-icon-button [matMenuTriggerFor]="menu">
              <mat-icon>mobile_screen_share</mat-icon>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="editIntent">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let intent">
            <button mat-icon-button (click)="edit(intent)">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button (click)="deleteIntent(intent)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      </table>
      <div class="center-button">
        <button class="add-intent" mat-raised-button color="primary" (click)="openDialog()">AÃ±adir Intent</button>
      </div>
      <mat-paginator [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" (page)="onPageChange($event)"></mat-paginator>



    </div>

  </div>

